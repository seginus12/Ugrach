#!/bin/bash

set -e

# Configure /etc/hosts
sed -i "s/.*127.0.0.1.*/127.0.0.1	$(hostname).edu.ugrasu localhost/" /etc/hosts
sed -i "s/.*127.0.1.1.*/127.0.1.1	$(hostname).edu.ugrasu $(hostname)/" /etc/hosts
sed -i "0,/::1/ s/.*::1.*/::1	debian.edu.ugrasu localhost ip6-localhost ip6-loopback/" /etc/hosts

# Join to domain
# read  -n 1 -p "Введите имя пользователя: " username
sudo net ads join -U $1

# Enable necessary services
sudo systemctl enable smbd.service --now
sudo systemctl enable nmbd.service --now
sudo systemctl enable winbind.service --now
